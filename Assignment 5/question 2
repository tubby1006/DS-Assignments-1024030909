#include <iostream>
using namespace std;

struct Node{
    int data;
    Node* next;
    Node(int v){ data=v; next=NULL; }
};

Node* insert(Node* head,int v){
    Node* n=new Node(v);
    if(!head) return n;
    Node* t=head;
    while(t->next) t=t->next;
    t->next=n;
    return head;
}

int delKey(Node*& head,int key){
    int c=0;
    while(head && head->data==key){
        Node* temp=head;
        head=head->next;
        delete temp;
        c++;
    }
    Node* prev=head;
    Node* cur=head?head->next:NULL;
    while(cur){
        if(cur->data==key){
            prev->next=cur->next;
            delete cur;
            cur=prev->next;
            c++;
        }else{
            prev=cur;
            cur=cur->next;
        }
    }
    return c;
}

void print(Node* h){
    while(h){ cout<<h->data<<" "; h=h->next; }
    cout<<endl;
}

int main(){
    Node* head=NULL;
    int arr[]={1,2,1,2,1,3,1};
    for(int x:arr) head=insert(head,x);
    print(head);
    int key=1;
    cout<<"Count = "<<delKey(head,key)<<endl;
    print(head);
}
